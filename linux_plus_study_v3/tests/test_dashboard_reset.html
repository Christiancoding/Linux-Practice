<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Reset Test</title>
</head>
<body>
    <h1>Dashboard Reset Test</h1>
    <div>
        <h2>Performance Overview</h2>
        <div class="stat-trend positive">Initial trend 1</div>
        <div class="stat-trend positive">Initial trend 2</div>
        <div class="stat-trend">Initial trend 3</div>
        <div class="stat-trend positive">Initial trend 4</div>
    </div>
    
    <button onclick="testReset()">Test Reset State</button>
    
    <script>
        // Simulate reset data
        const resetData = {
            accuracy: 0,
            total_correct: 0,
            study_time: 0,
            streak: 0
        };
        
        // Copy the function from the main template
        function createMockAnalyticsFromDashboard(dashboardData) {
            // Check if this is a reset state (all stats are 0)
            const isResetState = (
                (dashboardData.accuracy || 0) === 0 &&
                (dashboardData.total_correct || 0) === 0 &&
                (dashboardData.study_time || 0) === 0 &&
                (dashboardData.streak || 0) === 0
            );
            
            // If in reset state, return empty analytics data
            if (isResetState) {
                return {
                    total_questions: 0,
                    recent_performance: []
                };
            }
            
            return {
                total_questions: 100,
                recent_performance: [{date: '2025-08-05', accuracy: 75, questions: 10}]
            };
        }
        
        function updateImprovementMetrics(analyticsData) {
            if (!analyticsData || !analyticsData.recent_performance || analyticsData.recent_performance.length === 0) {
                // No data available - show neutral/empty state
                const trends = document.querySelectorAll('.stat-trend');
                
                // Update correct answers trend (first stat card)
                if (trends[0]) {
                    trends[0].className = 'stat-trend';
                    trends[0].innerHTML = '<i class="fas fa-minus"></i> No data yet';
                }
                
                // Update accuracy trend (second stat card)
                if (trends[1]) {
                    trends[1].className = 'stat-trend';
                    trends[1].innerHTML = '<i class="fas fa-minus"></i> Start practicing!';
                }
                
                // Update study time trend (fourth stat card)
                if (trends[3]) {
                    trends[3].className = 'stat-trend';
                    trends[3].innerHTML = '<i class="fas fa-minus"></i> 0h this week';
                }
                
                return;
            }
            
            // Show normal trends
            const trends = document.querySelectorAll('.stat-trend');
            if (trends[0]) trends[0].innerHTML = 'Normal trend 1';
            if (trends[1]) trends[1].innerHTML = 'Normal trend 2';
        }
        
        function testReset() {
            const mockAnalyticsData = createMockAnalyticsFromDashboard(resetData);
            console.log('Reset data:', resetData);
            console.log('Mock analytics:', mockAnalyticsData);
            updateImprovementMetrics(mockAnalyticsData);
        }
    </script>
</body>
</html>
