<!DOCTYPE html>
<html>
<head>
    <title>VM Playground JavaScript Test</title>
</head>
<body>
    <h1>VM Playground JavaScript Test</h1>
    <div id="test-output"></div>
    <br>
    <button id="test-list-vms">Test List VMs</button>
    <button id="test-start-vm">Test Start VM</button>
    <button id="test-console-log">Test Console Log</button>
    
    <script>
        console.log('Test page loaded');
        
        // Test basic fetch functionality
        document.getElementById('test-list-vms').onclick = async function() {
            console.log('Testing VM list...');
            try {
                const response = await fetch('/api/vm/list');
                const data = await response.json();
                console.log('VM list response:', data);
                document.getElementById('test-output').innerHTML = 'VM List: ' + JSON.stringify(data, null, 2);
            } catch (error) {
                console.error('VM list error:', error);
                document.getElementById('test-output').innerHTML = 'Error: ' + error.message;
            }
        };
        
        document.getElementById('test-start-vm').onclick = async function() {
            console.log('Testing VM start...');
            try {
                const response = await fetch('/api/vm/start', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ vm_name: 'ubuntu24.04' })
                });
                const data = await response.json();
                console.log('VM start response:', data);
                document.getElementById('test-output').innerHTML = 'VM Start: ' + JSON.stringify(data, null, 2);
            } catch (error) {
                console.error('VM start error:', error);
                document.getElementById('test-output').innerHTML = 'Error: ' + error.message;
            }
        };
        
        document.getElementById('test-console-log').onclick = function() {
            console.log('Console log test - this should appear in browser developer tools');
            document.getElementById('test-output').innerHTML = 'Check browser console for log message';
        };
        
        // Check if VM playground script is loaded
        setTimeout(function() {
            if (window.vmPlayground) {
                console.log('VM Playground is available:', window.vmPlayground);
                document.getElementById('test-output').innerHTML += '<br><strong>✓ VM Playground object found</strong>';
            } else {
                console.log('VM Playground NOT available');
                document.getElementById('test-output').innerHTML += '<br><strong>❌ VM Playground object NOT found</strong>';
            }
        }, 1000);
    </script>
    
    <!-- Load the VM playground script -->
    <script src="/static/js/vm_playground.js"></script>
</body>
</html>
