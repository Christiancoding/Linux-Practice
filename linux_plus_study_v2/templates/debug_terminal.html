<!DOCTYPE html>
<html>
<head>
    <title>Test Full Terminal Button</title>
    <style>
        .test-btn {
            background: #10b981;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .test-btn:hover {
            background: #059669;
        }
    </style>
</head>
<body>
    <h1>Debug Full Terminal Button</h1>
    
    <button class="test-btn" onclick="testDirectTerminal()">
        🖥️ Test Direct Terminal (ttyd)
    </button>
    
    <button class="test-btn" onclick="testFullTerminalPage()">
        📄 Test Full Terminal Page
    </button>
    
    <button class="test-btn" onclick="testPopup()">
        🪟 Test Popup Window
    </button>
    
    <div id="output" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>
    
    <script>
        function log(message) {
            document.getElementById('output').innerHTML += '<br>' + message;
            console.log(message);
        }
        
        function testDirectTerminal() {
            log('🔄 Testing direct terminal access...');
            const url = 'http://192.168.122.182:7682';
            
            // Test if terminal is accessible
            fetch(url, {mode: 'no-cors'})
                .then(() => {
                    log('✅ Terminal server is accessible');
                    window.open(url, '_blank');
                })
                .catch(err => {
                    log('❌ Terminal server error: ' + err.message);
                });
        }
        
        function testFullTerminalPage() {
            log('🔄 Testing full terminal page...');
            const url = '/full_terminal';
            
            fetch(url)
                .then(response => {
                    if (response.ok) {
                        log('✅ Full terminal page is accessible');
                        window.open(url, '_blank');
                    } else {
                        log('❌ Full terminal page returned: ' + response.status);
                    }
                })
                .catch(err => {
                    log('❌ Full terminal page error: ' + err.message);
                });
        }
        
        function testPopup() {
            log('🔄 Testing popup window...');
            
            const width = 800;
            const height = 600;
            const left = (screen.width - width) / 2;
            const top = (screen.height - height) / 2;
            
            const features = `width=${width},height=${height},left=${left},top=${top},resizable=yes`;
            
            const popup = window.open('about:blank', 'TestPopup', features);
            
            if (popup) {
                popup.document.write('<h1>Popup Test Successful!</h1><p>Popups are working.</p>');
                log('✅ Popup window opened successfully');
                setTimeout(() => popup.close(), 3000);
            } else {
                log('❌ Popup blocked - please allow popups for this site');
            }
        }
        
        // Log browser info
        log('🌐 Browser: ' + navigator.userAgent);
        log('📍 Current URL: ' + window.location.href);
    </script>
</body>
</html>
